framework:
  website: github.com/emmett-framework/emmett
  version: 2.0

build_deps:
  - libffi-dev
  - openssl-dev

fixes:
  - pip install pendulum==2.0.5

before_command:
  - >
    echo "logconfig_dict = {'handlers': { 'console': { 'class': 'logging.NullHandler', }, 'error_console': { 'class': 'logging.NullHandler', }, } }" > config.py

command: >
  gunicorn -c config.py \
    --bind 0.0.0.0:3000  \
    --reuse-port  \
    --workers $(nproc)  \
    --worker-class emmett.asgi.workers.EmmettWorker  \
      server:app
