---
version: v1.0
name: Benchmarking suite
execution_time_limit:
  hours: 24
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
- name: setup
  dependencies: []
  task:
    jobs:
    - name: setup
      commands:
      - checkout
      - cache store $SEMAPHORE_GIT_SHA .
      - cache store bin bin
      - bundle config path .cache
      - bundle install
      - cache store built-in .cache
      - bundle exec rake config
- name: go
  dependencies:
  - setup
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore bin
      - cache restore built-in
      - find bin -type f -exec chmod +x {} \;
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: chi
      commands:
      - cd go/chi && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/chi bundle exec rspec .spec
    - name: violetear
      commands:
      - cd go/violetear && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/violetear bundle exec rspec .spec
    - name: httprouter
      commands:
      - cd go/httprouter && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/httprouter bundle exec rspec .spec
    - name: macaron
      commands:
      - cd go/macaron && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/macaron bundle exec rspec .spec
    - name: gramework
      commands:
      - cd go/gramework && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gramework bundle exec rspec .spec
    - name: gearbox
      commands:
      - cd go/gearbox && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gearbox bundle exec rspec .spec
    - name: fasthttp
      commands:
      - cd go/fasthttp && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/fasthttp bundle exec rspec .spec
    - name: gf
      commands:
      - cd go/gf && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gf bundle exec rspec .spec
    - name: echo
      commands:
      - cd go/echo && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/echo bundle exec rspec .spec
    - name: gorouter
      commands:
      - cd go/gorouter && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gorouter bundle exec rspec .spec
    - name: goyave
      commands:
      - cd go/goyave && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/goyave bundle exec rspec .spec
    - name: atreugo
      commands:
      - cd go/atreugo && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/atreugo bundle exec rspec .spec
    - name: kami
      commands:
      - cd go/kami && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/kami bundle exec rspec .spec
    - name: aero
      commands:
      - cd go/aero && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/aero bundle exec rspec .spec
    - name: air
      commands:
      - cd go/air && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/air bundle exec rspec .spec
    - name: tango
      commands:
      - cd go/tango && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/tango bundle exec rspec .spec
    - name: goroute
      commands:
      - cd go/goroute && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/goroute bundle exec rspec .spec
    - name: beego
      commands:
      - cd go/beego && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/beego bundle exec rspec .spec
    - name: gorouter-fasthttp
      commands:
      - cd go/gorouter-fasthttp && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gorouter-fasthttp bundle exec rspec .spec
    - name: fiber
      commands:
      - cd go/fiber && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/fiber bundle exec rspec .spec
    - name: rte
      commands:
      - cd go/rte && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/rte bundle exec rspec .spec
    - name: clevergo
      commands:
      - cd go/clevergo && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/clevergo bundle exec rspec .spec
    - name: gorilla-mux
      commands:
      - cd go/gorilla-mux && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gorilla-mux bundle exec rspec .spec
    - name: mars
      commands:
      - cd go/mars && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/mars bundle exec rspec .spec
    - name: gin
      commands:
      - cd go/gin && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/gin bundle exec rspec .spec
    - name: webgo
      commands:
      - cd go/webgo && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/webgo bundle exec rspec .spec
    - name: router
      commands:
      - cd go/router && make build  -f .Makefile  && cd -
      - FRAMEWORK=go/router bundle exec rspec .spec
