cmake_minimum_required (VERSION 3.2)
PROJECT(drogon_benchmark)

LINK_DIRECTORIES(/usr/local/lib)
LINK_LIBRARIES(drogon trantor pthread dl)

SET(CMAKE_CXX_STANDARD 17)
SET(CMAKE_CXX_STANDARD_REQUIRED ON)
SET(CMAKE_CXX_EXTENSIONS OFF)

SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake_modules/)

#jsoncpp
FIND_PACKAGE (Jsoncpp REQUIRED)
INCLUDE_DIRECTORIES(${JSONCPP_INCLUDE_DIRS})
LINK_LIBRARIES(${JSONCPP_LIBRARIES})

#uuid
FIND_PACKAGE (UUID REQUIRED)
LINK_LIBRARIES(${UUID_LIBRARIES})

#OpenSSL
FIND_PACKAGE (OpenSSL)
IF(OpenSSL_FOUND)
    LINK_LIBRARIES(${OPENSSL_LIBRARIES})
ENDIF()

#zlib
FIND_PACKAGE(ZLIB REQUIRED)
LINK_LIBRARIES(${ZLIB_LIBRARIES})

SET(sources main.cc 
	    controllers/BenchmarkCtrl.cc
  	    controllers/UserCtrl.cc)

INCLUDE_DIRECTORIES(/usr/local/include)
ADD_EXECUTABLE(drogon_benchmark ${sources})
